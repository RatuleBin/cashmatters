{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}

{% block body_class %}template-newsindexpage{% endblock %}

{% block content %}
<div class="news-index">
    <div class="container">
        <h1>{{ page.title }}</h1>
        
        {% if page.intro %}
        <div class="intro">
            {{ page.intro|richtext }}
        </div>
        {% endif %}
        
        <div class="news-sections">
            {% if articles %}
            <section id="articles" class="articles-section">
                <h2>Articles</h2>
                <div class="articles-list">
                    <p>ARTICLES COUNT: {{ articles|length }}</p>
                    {% for article in articles %}
                    <article class="article-item">
                        <h3><a href="{% pageurl article %}">{{ article.title }}</a></h3>
                        {% if article.page_header_image %}
                        {% image article.page_header_image fill-300x200 as article_img %}
                        <img src="{{ article_img.url }}" alt="{{ article_img.alt }}" class="article-image">
                        {% endif %}
                        <p class="article-intro">{{ article.intro }}</p>
                        <p class="article-date">{{ article.date }}</p>
                        <a href="{% pageurl article %}" class="read-more">Read More</a>
                    </article>
                    {% endfor %}
                </div>
            </section>
            {% endif %}
            
            {% if keyfacts %}
            <section id="keyfacts" class="keyfacts-section">
                <h2>Key Facts</h2>
                <div class="keyfacts-list">
                    {% for keyfact in keyfacts %}
                    <article class="keyfact-item">
                        <h3><a href="{% pageurl keyfact %}">{{ keyfact.title }}</a></h3>
                        {% if keyfact.header_image %}
                        {% image keyfact.header_image fill-300x200 as keyfact_img %}
                        <img src="{{ keyfact_img.url }}" alt="{{ keyfact_img.alt }}" class="keyfact-image">
                        {% endif %}
                        <p class="keyfact-intro">{{ keyfact.intro }}</p>
                        <a href="{% pageurl keyfact %}" class="read-more">Read More</a>
                    </article>
                    {% endfor %}
                </div>
            </section>
            {% endif %}
        </div>
    </div>
</div>

<style>
.news-index {
    padding: 2rem 0;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
}

.intro {
    margin-bottom: 2rem;
    font-size: 1.2rem;
    line-height: 1.6;
}

.news-sections {
    display: grid;
    gap: 3rem;
}

.articles-list, .keyfacts-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 2rem;
}

.article-item, .keyfact-item {
    border: 1px solid #e5e5e5;
    border-radius: 8px;
    padding: 1.5rem;
    background: white;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.article-item h3, .keyfact-item h3 {
    margin-top: 0;
    font-size: 1.25rem;
}

.article-item h3 a, .keyfact-item h3 a {
    text-decoration: none;
    color: #333;
}

.article-item h3 a:hover, .keyfact-item h3 a:hover {
    color: #007d7e;
}

.article-image, .keyfact-image {
    width: 100%;
    height: 200px;
    object-fit: cover;
    border-radius: 4px;
    margin: 1rem 0;
}

.article-intro, .keyfact-intro {
    color: #666;
    line-height: 1.5;
    margin: 1rem 0;
}

.article-date {
    color: #999;
    font-size: 0.875rem;
    margin: 0.5rem 0;
}

.read-more {
    display: inline-block;
    color: #007d7e;
    text-decoration: none;
    font-weight: bold;
    margin-top: 1rem;
}

.read-more:hover {
    text-decoration: underline;
}
</style>
{% endblock %}